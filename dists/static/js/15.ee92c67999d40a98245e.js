webpackJsonp([15],{Q0Ww:function(t,e){},fHMa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("/9V0"),s=a("VsUZ"),o={data:function(){return{goodsData:[],pages:{currentPage:1,totalPages:5}}},components:{vTitle:n.a},methods:{indexMethod:function(t){return t+1},handleCurrentChange:function(t){console.log("当前页: "+t),this.getGoodsList(t)},getGoodsList:function(t){var e=this;this.axios.post(s.a.goodsList,{pageIndex:t,pageSize:5}).then(function(t){200==t.status&&200==t.data.status?(e.$set(e.pages,"currentPage",t.data.result.pageIndex),e.$set(e.pages,"totalPages",t.data.result.pageTotal),console.log(e.pages),t.data.result.result.map(function(t){return t.disabled?t.disabledStr="下架":t.disabledStr="上架",t.fileList.length>0&&(t.url=t.fileList[0].url),t}),e.goodsData=t.data.result.result):"1000005"==t.data.code?e.$alert("提示",t.data.message,{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}):e.$message.error(t.data.message)}).then(function(t){console.log(t)})},addGoodsClick:function(){this.$router.push({path:"/addgoods"})},editGoodsClick:function(t){this.$router.push({path:"/editgoods/"+t})},deleteRow:function(t,e,a){var n=this;this.axios({method:"delete",url:s.a.goods+"/"+e}).then(function(t){200==t.status&&200==t.data.status&&1==t.data.result?n.getGoodsList(1):"1000005"==t.data.code?n.$router.push("/login"):n.$message.error(t.data.message)}).then(function(t){console.log(t)})}},created:function(){this.getGoodsList(1)}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-page"},[a("v-title",{attrs:{title:"商品管理"}}),t._v(" "),a("div",{staticClass:"opt"},[a("el-button",{attrs:{type:"success"},on:{click:function(e){t.addGoodsClick()}}},[t._v("新建商品")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","padding-bottom":"1px"},attrs:{data:t.goodsData,border:""}},[a("el-table-column",{attrs:{label:"编号",width:"80",align:"center",type:"index",index:t.indexMethod}}),t._v(" "),a("el-table-column",{attrs:{label:"商品主图",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"tab-img",attrs:{src:t.row.url}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"库存",width:"110",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cardCount",label:"关联卡数/张",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"disabledStr",label:"状态",width:"110",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editGoodsClick(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteRow(e.$index,e.row.id,t.goodsData)}}},[t._v("\n              删除\n            ")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.pages.currentPage,"page-size":5,layout:"prev, pager, next, jumper","page-count":t.pages.totalPages},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.pages,"currentPage",e)}}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("Q0Ww")},"data-v-54e3b0e4",null);e.default=r.exports}});
//# sourceMappingURL=15.ee92c67999d40a98245e.js.map