{"version":3,"sources":["webpack:///src/components/pages/goods/goods.vue","webpack:///./src/components/pages/goods/goods.vue?017c","webpack:///./src/components/pages/goods/goods.vue"],"names":["goods","data","goodsData","pages","currentPage","totalPages","components","vTitle","Title","methods","indexMethod","index","handleCurrentChange","val","console","log","this","getGoodsList","curPage","_this","axios","post","api","goodsList","pageIndex","pageSize","then","res","status","$set","result","pageTotal","map","it","disabled","disabledStr","fileList","length","url","code","$alert","message","confirmButtonText","callback","action","$router","push","$message","error","err","addGoodsClick","path","editGoodsClick","id","deleteRow","rows","_this2","method","created","goods_goods","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","type","on","click","$event","staticStyle","width","padding-bottom","border","label","align","scopedSlots","_u","key","fn","scope","src","row","prop","fixed","size","nativeOn","preventDefault","$index","current-page","page-size","layout","page-count","current-change","update:currentPage","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.ee92c67999d40a98245e.js","sourcesContent":["<template>\r\n  <div class=\"goods-page\">\r\n      <v-title title=\"商品管理\"></v-title>\r\n      <div class=\"opt\">\r\n        <el-button type=\"success\" @click=\"addGoodsClick()\">新建商品</el-button>\r\n      </div>\r\n      <el-table\r\n        :data=\"goodsData\"\r\n        border\r\n        style=\"width: 100%;padding-bottom:1px;\">\r\n        <el-table-column\r\n          label=\"编号\"\r\n          width=\"80\"\r\n          align=\"center\"\r\n          type=\"index\"\r\n          :index=\"indexMethod\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"商品主图\"\r\n          width=\"180\"\r\n          align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <img class=\"tab-img\" :src=\"scope.row.url\">\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column\r\n          prop=\"goodsName\"\r\n          label=\"商品名称\"\r\n          align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"stock\"\r\n          label=\"库存\"\r\n          width=\"110\"\r\n          align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"price\"\r\n          label=\"价格\"\r\n          align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"cardCount\"\r\n          label=\"关联卡数/张\"\r\n          width=\"180\"\r\n          align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"disabledStr\"\r\n          label=\"状态\"\r\n          width=\"110\"\r\n          align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          fixed=\"right\"\r\n          label=\"操作\"\r\n          width=\"180\"\r\n          align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" size=\"small\" @click=\"editGoodsClick(scope.row.id)\">编辑</el-button>\r\n             <el-button\r\n                @click.native.prevent=\"deleteRow(scope.$index, scope.row.id, goodsData)\"\r\n                type=\"text\"\r\n                size=\"small\">\r\n                删除\r\n              </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div class=\"pagination-wrap\">\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page.sync=\"pages.currentPage\"\r\n          :page-size=\"5\"\r\n          layout=\"prev, pager, next, jumper\"\r\n          :page-count=\"pages.totalPages\">\r\n        </el-pagination>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport vTitle from \"../../common/Title\";\r\nimport api from \"../../../utils/api.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      goodsData: [],\r\n      pages: {\r\n        currentPage: 1,\r\n        totalPages: 5\r\n      }\r\n    };\r\n  },\r\n  components: {\r\n    vTitle\r\n  },\r\n  methods: {\r\n    indexMethod(index) {\r\n      return index + 1;\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.getGoodsList(val);\r\n\r\n    },\r\n    getGoodsList(curPage) {\r\n      this.axios\r\n        .post(api.goodsList, {\r\n          pageIndex: curPage,\r\n          pageSize: 5\r\n        })\r\n        .then(res => {\r\n          if (res.status == 200 && res.data.status == 200) {\r\n            this.$set(this.pages, \"currentPage\", res.data.result.pageIndex);\r\n            this.$set(this.pages, \"totalPages\", res.data.result.pageTotal);\r\n            console.log(this.pages);\r\n            res.data.result.result.map(it => {\r\n              if (it.disabled) {\r\n                it.disabledStr = \"下架\";\r\n              } else {\r\n                it.disabledStr = \"上架\";\r\n              }\r\n              if (it.fileList.length > 0) {\r\n                it.url = it.fileList[0].url;\r\n              }\r\n              return it;\r\n            });\r\n            this.goodsData = res.data.result.result;\r\n          } else if (res.data.code == \"1000005\") {\r\n            this.$alert(\"提示\", res.data.message, {\r\n              confirmButtonText: \"确定\",\r\n              callback: action => {\r\n                this.$router.push(\"/login\");\r\n              }\r\n            });\r\n          } else {\r\n            this.$message.error(res.data.message);\r\n          }\r\n        })\r\n        .then(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    addGoodsClick() {\r\n      this.$router.push({ path: \"/addgoods\" });\r\n    },\r\n    editGoodsClick(id) {\r\n      this.$router.push({ path: `/editgoods/${id}` });\r\n    },\r\n    deleteRow(index, id, rows) {\r\n      this.axios({\r\n        method: \"delete\",\r\n        url: `${api.goods}/${id}`\r\n      })\r\n        .then(res => {\r\n          if (\r\n            res.status == 200 &&\r\n            res.data.status == 200 &&\r\n            res.data.result == 1\r\n          ) {\r\n            this.getGoodsList(1);\r\n          } else if (res.data.code == \"1000005\") {\r\n            this.$router.push(\"/login\");\r\n          } else {\r\n            this.$message.error(res.data.message);\r\n          }\r\n        })\r\n        .then(err => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  },\r\n  created() {\r\n    this.getGoodsList(1);\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n.goods-page {\r\n  .opt {\r\n    text-align: left !important;\r\n    padding-bottom: 25px;\r\n  }\r\n  .tab-img {\r\n    width: 150px;\r\n    height: 100px;\r\n  }\r\n  .pagination-wrap {\r\n    margin-top: 25px;\r\n    text-align: right;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/pages/goods/goods.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"goods-page\"},[_c('v-title',{attrs:{\"title\":\"商品管理\"}}),_vm._v(\" \"),_c('div',{staticClass:\"opt\"},[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){_vm.addGoodsClick()}}},[_vm._v(\"新建商品\")])],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\",\"padding-bottom\":\"1px\"},attrs:{\"data\":_vm.goodsData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"编号\",\"width\":\"80\",\"align\":\"center\",\"type\":\"index\",\"index\":_vm.indexMethod}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"商品主图\",\"width\":\"180\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticClass:\"tab-img\",attrs:{\"src\":scope.row.url}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"goodsName\",\"label\":\"商品名称\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"stock\",\"label\":\"库存\",\"width\":\"110\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"price\",\"label\":\"价格\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cardCount\",\"label\":\"关联卡数/张\",\"width\":\"180\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"disabledStr\",\"label\":\"状态\",\"width\":\"110\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"180\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.editGoodsClick(scope.row.id)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.deleteRow(scope.$index, scope.row.id, _vm.goodsData)}}},[_vm._v(\"\\n              删除\\n            \")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination-wrap\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pages.currentPage,\"page-size\":5,\"layout\":\"prev, pager, next, jumper\",\"page-count\":_vm.pages.totalPages},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.pages, \"currentPage\", $event)}}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-54e3b0e4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/pages/goods/goods.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54e3b0e4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./goods.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./goods.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./goods.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54e3b0e4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./goods.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-54e3b0e4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pages/goods/goods.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}